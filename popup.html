<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>modcore Clipboard</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="fonts/fonts.css">
</head>
<body>

    <div id="view-auth" class="view" role="region" aria-label="Login">
        <div class="auth-container">
            <div class="icon i-lock" aria-hidden="true" style="width: 48px; height: 48px; background: var(--primary); margin-bottom:20px;"></div>
            <h2>Unlock modcore Clipboard</h2>
            <p class="subtext">Enter your 6-digit PIN to decrypt your vault.</p>
            
            <form id="login-form" novalidate>
                <div class="pin-wrapper">
                    <input type="password" id="auth-pin" class="pin-input" maxlength="6" pattern="[0-9]*" inputmode="numeric" placeholder="••••••" autocomplete="off">
                </div>
                <button type="submit" class="btn primary-btn">Unlock</button>
            </form>
            
            <button id="forgot-pin-btn" class="btn text-btn" style="margin-top: 15px; font-size: 12px; color: var(--text-muted);">Forgot PIN?</button>
        </div>
    </div>

    <div id="view-onboarding" class="view" role="region" aria-label="Setup">
        <div class="auth-container">
            <div class="icon i-logo" aria-hidden="true" style="width: 48px; height: 48px; background: var(--text-main); margin-bottom:20px;"></div>
            <h2>Welcome to modcore Clipboard</h2>
            <p class="subtext">
                Create a secure 6-digit PIN. Your data is encrypted client-side (AES-256). 
                <br><strong>We cannot recover your data if you lose this PIN.</strong>
            </p>
            <form id="setup-form" style="width: 100%;">
                <input type="password" id="setup-pin" class="pin-input" maxlength="6" inputmode="numeric" placeholder="Create PIN" required>
                <input type="password" id="setup-pin-confirm" class="pin-input" maxlength="6" inputmode="numeric" placeholder="Confirm PIN" required>
                <button type="submit" class="btn primary-btn">Set PIN & Start</button>
            </form>
        </div>
    </div>

    <div id="view-dashboard" class="view" role="region" aria-label="Dashboard">
        <header>
            <div class="logo-area">
                <div class="icon i-logo" style="background:var(--primary);"></div>
                <span style="font-weight:700;">modcore Clipboard</span>
            </div>
            <div class="header-actions">
                <button id="add-snippet-btn" class="btn icon-btn" aria-label="Add Snippet"><i class="icon i-plus" style="background:var(--primary)"></i></button>
                <button id="settings-btn" class="btn icon-btn" aria-label="Settings"><i class="icon i-settings"></i></button>
            </div>
        </header>
        
        <div class="search-container">
            <i class="icon i-search search-icon-place"></i>
            <input type="text" id="search-input" class="search-bar" placeholder="Search secure snippets...">
        </div>

        <div id="snippet-list" role="list"></div>
    </div>

    <div id="modal-edit" class="modal-overlay" role="dialog" aria-modal="true" aria-labelledby="modal-title">
        <div class="modal-sheet">
            <div class="sheet-header">
                <span class="sheet-title" id="modal-title">Edit Snippet</span>
                <button class="btn text-btn" id="close-modal" style="color:var(--primary)">Cancel</button>
            </div>
            
            <div class="form-group">
                <div id="edit-image-preview-container" class="hidden">
                    <img id="edit-image-preview" src="" alt="Snippet Preview">
                    <button id="remove-image-btn" class="btn small-btn">Remove Image</button>
                </div>

                <textarea id="edit-content" class="full-input" placeholder="Type text or Paste (Ctrl+V) an image..."></textarea>
                <p style="font-size: 11px; color: var(--text-muted); margin-top: 5px;">
                    Supports secure text and images (paste to upload).
                </p>
            </div>
            <button id="save-snippet-btn" class="btn primary-btn">Save Encrypted</button>
        </div>
    </div>

    <div id="modal-settings" class="modal-overlay" role="dialog" aria-modal="true" aria-label="Settings">
        <div class="modal-sheet">
            <div class="sheet-header">
                <span class="sheet-title">Settings</span>
                <button class="btn text-btn" id="close-settings" style="color:var(--primary)">Done</button>
            </div>
            
            <div class="settings-list">
                <div class="setting-item">
                    <div>
                        <label class="form-label">Clipboard Monitor</label>
                        <div class="setting-desc">Auto-save copied text while browsing</div>
                    </div>
                    <input type="checkbox" id="toggle-monitor" class="ios-switch">
                </div>

                <div class="setting-item">
                    <div>
                        <label class="form-label">Security</label>
                        <div class="setting-desc">Update your encryption PIN</div>
                    </div>
                    <button id="change-pin-btn" class="btn secondary-btn">Change PIN</button>
                </div>

                <div class="setting-item">
                    <div>
                        <label class="form-label">Data Management</label>
                        <div class="setting-desc">Backup or restore vault</div>
                    </div>
                    <div style="display:flex; gap:5px;">
                        <button id="export-data-btn" class="btn secondary-btn">Export JSON</button>
                        <button id="import-data-btn" class="btn secondary-btn">Import</button>
                        <input type="file" id="import-file-input" accept=".json" style="display:none">
                    </div>
                </div>

                <div style="margin-top:20px; padding-top:20px; border-top:1px solid var(--border);">
                    <button id="reset-app-btn" class="btn danger-btn-outline" style="width:100%;">Reset App & Erase Data</button>
                </div>
            </div>
        </div>
    </div>

    <div id="modal-change-pin" class="modal-overlay">
        <div class="modal-sheet" style="height: auto; padding-bottom: 30px;">
            <div class="sheet-header">
                <span class="sheet-title">Change PIN</span>
                <button class="btn text-btn" id="close-change-pin">Cancel</button>
            </div>
            <p class="subtext">This will re-encrypt all your data with the new PIN.</p>
            <form id="change-pin-form">
                <input type="password" id="new-pin" class="pin-input small-pin" maxlength="6" inputmode="numeric" placeholder="New PIN (6 digits)" required>
                <input type="password" id="new-pin-confirm" class="pin-input small-pin" maxlength="6" inputmode="numeric" placeholder="Confirm New PIN" required>
                <button type="submit" class="btn primary-btn">Re-encrypt Data</button>
            </form>
        </div>
    </div>

    <div id="custom-dialog" class="dialog-overlay hidden">
        <div class="dialog-box">
            <h3 id="dialog-title">Title</h3>
            <p id="dialog-text">Message goes here.</p>
            <div class="dialog-actions">
                <button id="dialog-cancel" class="btn secondary-btn">Cancel</button>
                <button id="dialog-confirm" class="btn primary-btn">Confirm</button>
            </div>
        </div>
    </div>

    <script src="js/app.js"></script>
</body>
</html>